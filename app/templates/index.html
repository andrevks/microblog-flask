<!-- Inherit from base.html -->
{% extends 'base.html' %}

{% block content %}
  <h1>Hi, {{ current_user.username }}!</h1>
<!--The template cannot make any assumptions about how many
    posts there are, so it needs to be prepared to render as 
    many posts as the view sends in a generic way.-->
  {% if form %}
  <form action="" method="post">
    {{ form.hidden_tag() }}
    <p>
      {{ form.post.label }}<br>
      {{ form.post(cols=32, rows=4) }} <br>
      {% for error in form.post.errors %}
      <span style="color:#ff0038;">[{{ error }}]</span>
      {% endfor %}
    </p>
    <p>
      {{ form.submit() }}
    </p>
  </form>
  {% endif %}
  {% for post in posts %}
    {% include '_post.html' %}
  {% endfor %}
  {% if prev_url %}
    <a href="{{ prev_url }}">Newer posts</a>
  {% endif %}
  {% if next_url %}
    <a href="{{ next_url }}">Older posts</a>
  {% endif %}
{% endblock %}